Index: styles/subsilver2/template/viewtopic_print.html
===================================================================
--- styles/subsilver2/template/viewtopic_print.html	(revision 10624)
+++ styles/subsilver2/template/viewtopic_print.html	(working copy)
@@ -79,7 +79,7 @@
 	<td colspan="2"><br /></td>
 </tr>
 <tr>
-	<td><span class="topic">{TOPIC_TITLE}</span><br /><span class="gensmall"><a href="{U_TOPIC}">{U_TOPIC}</a></span></td>
+	<td><span class="topic"><!-- IF SUBJECT_PREFIX_TITLE -->{SUBJECT_PREFIX_TITLE} <!-- ENDIF -->{TOPIC_TITLE}</span><br /><span class="gensmall"><a href="{U_TOPIC}">{U_TOPIC}</a></span></td>
 	<td align="{S_CONTENT_FLOW_END}" valign="bottom"><span class="gensmall">{PAGE_NUMBER}</span></td>
 </tr>
 </table>
Index: styles/subsilver2/template/posting_body.html
===================================================================
--- styles/subsilver2/template/posting_body.html	(revision 10624)
+++ styles/subsilver2/template/posting_body.html	(working copy)
@@ -171,7 +171,14 @@
 	<!-- ENDIF -->
 <!-- ENDIF -->
 
+<!-- IF SUBJECT_PREFIX_DROPDOWN_OPTIONS -->
 <tr>
+	<td class="row1" width="22%"><b class="genmed">{L_ACP_SUBJECT_PREFIX}</b></td>
+	<td class="row2" width="78%"><select name="prefixes" id="prefixes">{SUBJECT_PREFIX_DROPDOWN_OPTIONS}</select></td>
+</tr>
+<!-- ENDIF -->
+
+<tr>
 	<td class="row1" width="22%"><b class="genmed">{L_SUBJECT}:</b></td>
 	<td class="row2" width="78%"><input class="post" style="width:450px" type="text" name="subject" size="45" maxlength="<!-- IF S_NEW_MESSAGE -->60<!-- ELSE -->64<!-- ENDIF -->" tabindex="2" value="{SUBJECT}" /></td>
 </tr>
Index: styles/subsilver2/template/viewtopic_body.html
===================================================================
--- styles/subsilver2/template/viewtopic_body.html	(revision 10624)
+++ styles/subsilver2/template/viewtopic_body.html	(working copy)
@@ -15,7 +15,7 @@
 <!-- ENDIF -->
 
 <div id="pageheader">
-	<h2><a class="titles" href="{U_VIEW_TOPIC}">{TOPIC_TITLE}</a></h2>
+	<h2><!-- IF SUBJECT_PREFIX_TITLE --><span class="titles"<!-- IF SUBJECT_PREFIX_COLOUR --> style="color: #{SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{SUBJECT_PREFIX_TITLE}</span> <!-- ENDIF --><a class="titles" href="{U_VIEW_TOPIC}">{TOPIC_TITLE}</a></h2>
 
 <!-- IF MODERATORS -->
 	<p class="moderators"><!-- IF S_SINGLE_MODERATOR -->{L_MODERATOR}<!-- ELSE -->{L_MODERATORS}<!-- ENDIF -->: {MODERATORS}</p>
@@ -347,7 +347,7 @@
 
 <table width="100%" cellspacing="1">
 <tr>
-	<td width="40%" valign="top" nowrap="nowrap" align="{S_CONTENT_FLOW_BEGIN}"><!-- IF S_TOPIC_MOD --><form method="post" action="{S_MOD_ACTION}"><span class="gensmall">{L_QUICK_MOD}:</span> {S_TOPIC_MOD} <input class="btnlite" type="submit" value="{L_GO}" /></form><!-- ENDIF --></td>
+	<td width="40%" valign="top" nowrap="nowrap" align="{S_CONTENT_FLOW_BEGIN}"><!-- IF S_TOPIC_MOD --><form method="post" action="{S_MOD_ACTION}"><span class="gensmall">{L_QUICK_MOD}:</span> {S_TOPIC_MOD} <input class="btnlite" type="submit" value="{L_GO}" /></form><!-- ENDIF --><!-- IF U_SUBJECT_PREFIX_QUICK_CHANGE_ACTION --><!-- IF S_TOPIC_MOD --><br class="clear" /><!-- ENDIF --><form method="post" action="{U_SUBJECT_PREFIX_QUICK_CHANGE_ACTION}"><label for="quick-prefix-change-select">{L_SUBJECT_PREFIX_QUICK_CHANGE}:</label> <select name="prefixid" id="quick-prefix-change-select">{S_SUBJECT_PREFIX_QUICK_CHANGE_OPTIONS}</select> <input type="submit" value="{L_GO}" class="button2" /></td>
 	<td align="{S_CONTENT_FLOW_END}" valign="top" nowrap="nowrap"><span class="gensmall"><!-- BEGIN rules -->{rules.RULE}<br /><!-- END rules --></span></td>
 </tr>
 </table>
Index: styles/subsilver2/template/viewforum_body.html
===================================================================
--- styles/subsilver2/template/viewforum_body.html	(revision 10624)
+++ styles/subsilver2/template/viewforum_body.html	(working copy)
@@ -41,7 +41,7 @@
 			<!-- ENDIF -->
 			<td class="row1">
 				<!-- IF topicrow.S_UNREAD_TOPIC --><a href="{topicrow.U_NEWEST_POST}">{NEWEST_POST_IMG}</a><!-- ENDIF -->
-				{topicrow.ATTACH_ICON_IMG} <!-- IF topicrow.S_HAS_POLL or topicrow.S_TOPIC_MOVED --><b>{topicrow.TOPIC_TYPE}</b> <!-- ENDIF --><a title="{L_POSTED}: {topicrow.FIRST_POST_TIME}" href="{topicrow.U_VIEW_TOPIC}"class="topictitle">{topicrow.TOPIC_TITLE}</a>
+				{topicrow.ATTACH_ICON_IMG} <!-- IF topicrow.S_HAS_POLL or topicrow.S_TOPIC_MOVED --><b>{topicrow.TOPIC_TYPE}</b> <!-- ENDIF --><!-- IF topicrow.SUBJECT_PREFIX_TITLE --><b class="topictitle"<!-- IF topicrow.SUBJECT_PREFIX_COLOUR --> style="color: #{topicrow.SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{topicrow.SUBJECT_PREFIX_TITLE}</b> <!-- ENDIF --><a title="{L_POSTED}: {topicrow.FIRST_POST_TIME}" href="{topicrow.U_VIEW_TOPIC}"class="topictitle">{topicrow.TOPIC_TITLE}</a>
 				<!-- IF topicrow.S_TOPIC_UNAPPROVED or topicrow.S_POSTS_UNAPPROVED -->
 					<a href="{topicrow.U_MCP_QUEUE}">{UNAPPROVED_IMG}</a>&nbsp;
 				<!-- ENDIF -->
@@ -192,7 +192,7 @@
 				<!-- ENDIF -->
 				<td class="row1">
 					<!-- IF topicrow.S_UNREAD_TOPIC --><a href="{topicrow.U_NEWEST_POST}">{NEWEST_POST_IMG}</a><!-- ENDIF -->
-					{topicrow.ATTACH_ICON_IMG} <!-- IF topicrow.S_HAS_POLL or topicrow.S_TOPIC_MOVED --><b>{topicrow.TOPIC_TYPE}</b> <!-- ENDIF --><a title="{L_POSTED}: {topicrow.FIRST_POST_TIME}" href="{topicrow.U_VIEW_TOPIC}" class="topictitle">{topicrow.TOPIC_TITLE}</a>
+					{topicrow.ATTACH_ICON_IMG} <!-- IF topicrow.S_HAS_POLL or topicrow.S_TOPIC_MOVED --><b>{topicrow.TOPIC_TYPE}</b> <!-- ENDIF --><!-- IF topicrow.SUBJECT_PREFIX_TITLE --><b class="topictitle"<!-- IF topicrow.SUBJECT_PREFIX_COLOUR --> style="color: #{topicrow.SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{topicrow.SUBJECT_PREFIX_TITLE}</b> <!-- ENDIF --><a title="{L_POSTED}: {topicrow.FIRST_POST_TIME}" href="{topicrow.U_VIEW_TOPIC}" class="topictitle">{topicrow.TOPIC_TITLE}</a>
 					<!-- IF topicrow.S_TOPIC_UNAPPROVED or topicrow.S_POSTS_UNAPPROVED -->
 						<a href="{topicrow.U_MCP_QUEUE}">{topicrow.UNAPPROVED_IMG}</a>&nbsp;
 					<!-- ENDIF -->
Index: styles/prosilver/theme/common.css
===================================================================
--- styles/prosilver/theme/common.css	(revision 10624)
+++ styles/prosilver/theme/common.css	(working copy)
@@ -630,3 +630,19 @@
 	line-height: 1px;
 	background: transparent;
 }
+
+/* Begin Subject Prefix
+---------------------------------------- */
+.subjectprefix {
+	font-family: "Trebuchet MS", Helvetica, Arial, Sans-serif;
+	font-size: 1.2em;
+	font-weight: bold;
+	color: #000000;
+	text-decoration: none;
+}
+
+.content h2 .subjectprefix {
+	color: #000000;
+}
+/* End Subject Prefix
+---------------------------------------- */
\ No newline at end of file
Index: styles/prosilver/template/viewtopic_print.html
===================================================================
--- styles/prosilver/template/viewtopic_print.html	(revision 10624)
+++ styles/prosilver/template/viewtopic_print.html	(working copy)
@@ -26,7 +26,7 @@
 		<h1>{SITENAME}</h1>
 		<p>{SITE_DESCRIPTION}<br /><a href="{U_FORUM}">{U_FORUM}</a></p>
 
-		<h2>{TOPIC_TITLE}</h2>
+		<h2><!-- IF SUBJECT_PREFIX_TITLE --><span class="subjectprefix">{SUBJECT_PREFIX_TITLE}</span> <!-- ENDIF -->{TOPIC_TITLE}</h2>
 		<p><a href="{U_TOPIC}">{U_TOPIC}</a></p>
 	</div>
 
Index: styles/prosilver/template/posting_editor.html
===================================================================
--- styles/prosilver/template/posting_editor.html	(revision 10624)
+++ styles/prosilver/template/posting_editor.html	(working copy)
@@ -100,6 +100,11 @@
 	</dl>
 	<!-- ENDIF -->
 
+	<!-- IF SUBJECT_PREFIX_DROPDOWN_OPTIONS -->
+		<dt><label for="prefixes">{L_ACP_SUBJECT_PREFIX}</label></dt>
+		<dd><select name="prefixes" id="prefixes">{SUBJECT_PREFIX_DROPDOWN_OPTIONS}</select></dd>
+	<!-- ENDIF -->
+
 	<!-- IF S_POST_ACTION or S_PRIVMSGS or S_EDIT_DRAFT -->
 	<dl style="clear: left;">
 		<dt><label for="subject">{L_SUBJECT}:</label></dt>
Index: styles/prosilver/template/viewtopic_body.html
===================================================================
--- styles/prosilver/template/viewtopic_body.html	(revision 10624)
+++ styles/prosilver/template/viewtopic_body.html	(working copy)
@@ -1,6 +1,6 @@
 <!-- INCLUDE overall_header.html -->
 <!-- IF U_MCP --><p>[&nbsp;<a href="{U_MCP}">{L_MCP}</a>&nbsp;]</p><!-- ENDIF -->
-<h2><a href="{U_VIEW_TOPIC}">{TOPIC_TITLE}</a></h2>
+<h2><!-- IF SUBJECT_PREFIX_TITLE --><span class="subjectprefix"<!-- IF SUBJECT_PREFIX_COLOUR --> style="color: #{SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{SUBJECT_PREFIX_TITLE}</span> <!-- ENDIF --><a href="{U_VIEW_TOPIC}">{TOPIC_TITLE}</a></h2>
 <!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body -->
 <!-- IF FORUM_DESC --><div style="display: none !important;">{FORUM_DESC}<br /></div><!-- ENDIF -->
 
@@ -267,6 +267,16 @@
 	</form>
 <!-- ENDIF -->
 
+<!-- IF U_SUBJECT_PREFIX_QUICK_CHANGE_ACTION -->
+	<!-- IF S_TOPIC_MOD --><br class="clear" /><!-- ENDIF -->
+	<form method="post" action="{U_SUBJECT_PREFIX_QUICK_CHANGE_ACTION}">
+	<fieldset class="quickmod">
+		<label for="quick-prefix-change-select">{L_SUBJECT_PREFIX_QUICK_CHANGE}:</label> <select name="prefixid" id="quick-prefix-change-select">{S_SUBJECT_PREFIX_QUICK_CHANGE_OPTIONS}</select> <input type="submit" value="{L_GO}" class="button2" />
+		{S_FORM_TOKEN}
+	</fieldset>
+	</form>
+<!-- ENDIF -->
+
 <!-- IF S_DISPLAY_ONLINE_LIST -->
 	<h3><!-- IF U_VIEWONLINE --><a href="{U_VIEWONLINE}">{L_WHO_IS_ONLINE}</a><!-- ELSE -->{L_WHO_IS_ONLINE}<!-- ENDIF --></h3>
 	<p>{LOGGED_IN_USER_LIST}</p>
Index: styles/prosilver/template/viewforum_body.html
===================================================================
--- styles/prosilver/template/viewforum_body.html	(revision 10624)
+++ styles/prosilver/template/viewforum_body.html	(working copy)
@@ -139,7 +139,7 @@
 
 		<li class="row<!-- IF topicrow.S_ROW_COUNT is even --> bg1<!-- ELSE --> bg2<!-- ENDIF --><!-- IF topicrow.S_POST_ANNOUNCE --> announce<!-- ENDIF --><!-- IF topicrow.S_POST_STICKY --> sticky<!-- ENDIF --><!-- IF topicrow.S_TOPIC_REPORTED --> reported<!-- ENDIF -->">
 			<dl class="icon" style="background-image: url({topicrow.TOPIC_FOLDER_IMG_SRC}); background-repeat: no-repeat;">
-				<dt<!-- IF topicrow.TOPIC_ICON_IMG and S_TOPIC_ICONS --> style="background-image: url({T_ICONS_PATH}{topicrow.TOPIC_ICON_IMG}); background-repeat: no-repeat;"<!-- ENDIF --> title="{topicrow.TOPIC_FOLDER_IMG_ALT}"><!-- IF topicrow.S_UNREAD_TOPIC --><a href="{topicrow.U_NEWEST_POST}">{NEWEST_POST_IMG}</a> <!-- ENDIF --><a href="{topicrow.U_VIEW_TOPIC}" class="topictitle">{topicrow.TOPIC_TITLE}</a>
+				<dt<!-- IF topicrow.TOPIC_ICON_IMG and S_TOPIC_ICONS --> style="background-image: url({T_ICONS_PATH}{topicrow.TOPIC_ICON_IMG}); background-repeat: no-repeat;"<!-- ENDIF --> title="{topicrow.TOPIC_FOLDER_IMG_ALT}"><!-- IF topicrow.S_UNREAD_TOPIC --><a href="{topicrow.U_NEWEST_POST}">{NEWEST_POST_IMG}</a> <!-- ENDIF --><!-- IF topicrow.SUBJECT_PREFIX_TITLE --><span class="subjectprefix"<!-- IF topicrow.SUBJECT_PREFIX_COLOUR --> style="color: #{topicrow.SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{topicrow.SUBJECT_PREFIX_TITLE}</span> <!-- ENDIF --><a href="{topicrow.U_VIEW_TOPIC}" class="topictitle">{topicrow.TOPIC_TITLE}</a>
 					<!-- IF topicrow.S_TOPIC_UNAPPROVED or topicrow.S_POSTS_UNAPPROVED --><a href="{topicrow.U_MCP_QUEUE}">{topicrow.UNAPPROVED_IMG}</a> <!-- ENDIF -->
 					<!-- IF topicrow.S_TOPIC_REPORTED --><a href="{topicrow.U_MCP_REPORT}">{REPORTED_IMG}</a><!-- ENDIF --><br />
 					<!-- IF topicrow.PAGINATION --><strong class="pagination"><span>{topicrow.PAGINATION}</span></strong><!-- ENDIF -->
Index: styles/prosilver/template/posting_preview.html
===================================================================
--- styles/prosilver/template/posting_preview.html	(revision 10624)
+++ styles/prosilver/template/posting_preview.html	(working copy)
@@ -25,7 +25,7 @@
 <!-- ENDIF -->
 
 	<div class="postbody">
-		<h3>{L_PREVIEW}: {PREVIEW_SUBJECT}</h3>
+		<h3>{L_PREVIEW}:<!-- IF SUBJECT_PREFIX_TITLE --> <span class="subjectprefix"<!-- IF SUBJECT_PREFIX_COLOUR --> style="color: #{SUBJECT_PREFIX_COLOUR};"<!-- ENDIF -->>{SUBJECT_PREFIX_TITLE}</span> <!-- ENDIF --> {PREVIEW_SUBJECT}</h3>
 
 		<div class="content">{PREVIEW_MESSAGE}</div>
 
Index: includes/functions_posting.php
===================================================================
--- includes/functions_posting.php	(revision 10624)
+++ includes/functions_posting.php	(working copy)
@@ -1956,6 +1956,11 @@
 		break;
 	}
 
+	//-- Begin Subject Prefix
+	//-- Add:
+	subject_prefix_core::add_prefix_to_posting_sql($post_mode, $sql_data);
+	//-- End Subject Prefix
+
 	// Submit new topic
 	if ($post_mode == 'post')
 	{
Index: includes/functions_admin.php
===================================================================
--- includes/functions_admin.php	(revision 10624)
+++ includes/functions_admin.php	(working copy)
@@ -544,6 +544,15 @@
 	}
 	unset($table_ary);
 
+	//-- Begin Subject Prefix
+	//-- Add:
+	global $phpbb_hook;
+	if (!empty($phpbb_hook))
+	{
+		$phpbb_hook->call_hook('subject_prefix_move_hook', $topic_ids, $forum_id);
+	}
+	//-- End Subject Prefix
+
 	if ($auto_sync)
 	{
 		sync('forum', 'forum_id', $forum_ids, true, true);
Index: viewforum.php
===================================================================
--- viewforum.php	(revision 10624)
+++ viewforum.php	(working copy)
@@ -680,6 +680,11 @@
 			'S_TOPIC_TYPE_SWITCH'	=> ($s_type_switch == $s_type_switch_test) ? -1 : $s_type_switch_test)
 		);
 
+		//-- Begin Subject Prefix
+		//-- Add:
+		subject_prefix_core::add_subject_prefix_to_blockrow($row['subject_prefix_id'], 'topicrow');
+		//-- End Subject Prefix
+
 		$s_type_switch = ($row['topic_type'] == POST_ANNOUNCE || $row['topic_type'] == POST_GLOBAL) ? 1 : 0;
 
 		if ($unread_topic)
