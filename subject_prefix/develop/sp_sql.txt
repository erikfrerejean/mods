# The main table
CREATE TABLE subject_prefix (
  prefix_id mediumint(8) NOT NULL AUTO_INCREMENT,
  prefix_title varchar(255) NOT NULL,
  prefix_colour varchar(6) DEFAULT NULL,
  PRIMARY KEY (prefix_id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

# Forums table
CREATE TABLE subject_prefix_forums (
  prefix_id mediumint(8) NOT NULL DEFAULT '0',
  forum_id mediumint(8) NOT NULL DEFAULT '0',
  KEY prefix_id (prefix_id),
  KEY forum_id (forum_id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

# Add permission
INSERT INTO phpbb_acl_options (auth_option_id,auth_option,is_global,is_local,founder_only) VALUES (NULL,'a_subject_prefix','1','0','0');
INSERT INTO phpbb_acl_options (auth_option_id,auth_option,is_global,is_local,founder_only) VALUES (NULL,'m_subject_prefix','1','0','0');
INSERT INTO phpbb_acl_options (auth_option_id,auth_option,is_global,is_local,founder_only) VALUES (NULL,'u_subject_prefix','1','0','0');

# Add prefix column to phpbb_topics
ALTER TABLE phpbb_topics ADD COLUMN subject_prefix_id mediumint(8) DEFAULT '0';
CREATE INDEX topic_first_post_id ON phpbb_topics (topic_first_post_id);
CREATE INDEX subject_prefix_id ON phpbb_topics (subject_prefix_id);