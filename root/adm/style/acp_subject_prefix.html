<!-- IF S_KEYWORD_VERSION -->
<!--
/**
 *
 * @author Erik Frèrejean
 *
 * @package Subject Prefix
 * @copyright (c) 2010 Erik Frèrejean ( erikfrerejean@phpbb.com ) http://www.erikfrerejean.nl
 * @license http://opensource.org/licenses/gpl-license.php GNU Public License
 *
 */
//-->
<!-- ENDIF -->

<!-- INCLUDE overall_header.html -->

<h1>{L_ACP_SUBJECT_PREFIX}</h1>
<p><!-- IF .forumrow -->{L_ACP_SUBJECT_PREFIX_EXPLAIN}<!-- ELSE -->{L_NO_PREFIXES}<!-- ENDIF --></p>
<!-- BEGIN forumrow -->
    <table cellspacing="1" id="prefixrowbody{forumrow.FORUM_ID}">
	<thead>
	    <tr>
		<th>{forumrow.FORUMNAME}</th>
		<th>{L_OPTIONS}</th>
	    </tr>
	</thead>
	<tbody class="prefixrowbody">
	    <!-- BEGIN prefixrow -->
	    <tr class="<!-- IF prefixrow.S_ROW_COUNT is odd -->row2<!-- ELSE -->row1<!-- ENDIF -->">
		<td>{prefixrow.PREFIX_NAME}</td>
		<td style="width: 80px; text-align: right; white-space: nowrap">
		    <!-- IF prefixrow.S_FIRST_ROW && not prefixrow.S_LAST_ROW -->
			{ICON_MOVE_UP_DISABLED}
			<a href="{prefixrow.U_MOVE_DOWN}">{ICON_MOVE_DOWN}</a>
		    <!-- ELSEIF not prefixrow.S_FIRST_ROW && not prefixrow.S_LAST_ROW -->
			<a href="{prefixrow.U_MOVE_UP}">{ICON_MOVE_UP}</a>
			<a href="{prefixrow.U_MOVE_DOWN}">{ICON_MOVE_DOWN}</a>
		    <!-- ELSEIF not prefixrow.S_FIRST_ROW && prefixrow.S_LAST_ROW -->
			<a href="{prefixrow.U_MOVE_UP}">{ICON_MOVE_UP}</a>
			{ICON_MOVE_DOWN_DISABLED}
		    <!-- ENDIF -->
		    <a href="{prefixrow.U_EDIT}">{ICON_EDIT}</a>
		    <a href="{prefixrow.U_DELETE}">{ICON_DELETE}</a>
		</td>
	    </tr>
	    <!-- END prefixrow -->
	</tbody>
    </table>
<!-- END forumrow -->

<script type="text/javascript" src="style/subject_prefix.js"></script>
<script type="text/javascript">
var cookieName = 'acpprefixcollapsed';

$(document).ready(function() {
    // Hide all tables
    $('#main > table').each(function(index) {
	hidePrefixTable(this);

	// Bind the onclick to the th
	$('thead > tr > th:first', this).click(function() {
	    displayPrefixTable(this);
	});
    });

    // Do we have a cookie?
    var cookie = $.cookie(cookieName);
    if (!cookie)
    {
	return;
    }

    // Yes, restore the last displayed list
    var cookieObj = $('#main > #' + cookie);
    displayPrefixTable(cookieObj, true);
});

function hidePrefixTable(ele)
{
    // Hide the options column
    $('thead > tr > th:gt(0)', ele).hide();

    // Hide the body
    $('tbody', ele).hide();
}

function displayPrefixTable(ele, fromCookie)
{
    // Hide all others
    $('#main > table').each(function(index) {
	hidePrefixTable(this);
    });

    // Get the table
    if (fromCookie != null)
	var table = ele;
    else
	var table = $(ele).parent().parent().parent();

    // Display the options column
    $('thead > tr > th:gt(0)', table).show();

    // Display the box
    $('tbody', table).show();

    // Set a cookie so we know which "prefixlist" is open atm
    var selected = $(table).attr('id');
    $.cookie(cookieName, selected, { expires: 365, path: "/" });
}
</script>

<!-- INCLUDE overall_footer.html -->
